### Authorize / Filter

이번 강의에서는 메소드 레벨 보안에 대해서 배웠다.

그 중에서도 @Pre(Post)Authorize 와 @Pre(Post)Filter를 배웠는데

Filter 가 참 흥미롭다.

---

### @Pre(Post)Authorize

해당 애노테이션은 이 애노테이션이 붙은 메서드를 실행하기 이전(Pre),이후(Post)에 권한을 확인 하는데

@Pre 인 경우는 권한이 없으면 아예 실행이 되지 않고   
@Post 인 경우는 우선 메서드를 실행하고 반화할 때 권한을 확인해서 권한이 없으면 반환하지 않는다.

---

### @Pre(Post)Filter

이 애노테이션도 앞서 알아본 Authorize 애노테이션과 비슷하게 작동한다.

대신 이거는 필터링 해주는 역할이라 보면 될 것 같다.

여기서 필터는 Spring Security 에서 사용하던 그 Filter 가 아니라

약간 엑셀에서 필터를 거는것과 비슷하다.

또한 중요한 것은 반환 타입이 컬렉션(Collection) 이어야 한다는 점이다.

@Pre 인 경우는 전달받은 데이터의 어떤 조건에 해당하면 실행을 안하고
@Post 인 경우는 우선 전달받은 데이터를 수행한 이후에 다시 반환할 때 해당 데이터를 보여주지 않는다.(필터링)

Controller 에서 데이터를 전달받아서 저장하는 것까지 했는데  
@Post 인 경우는 데이터를 전달받아서 저장까지 수행하고 되돌려줄때 화면에 보이지 않기 때문에 DB를 보면 데이터가 제대로 저장된 것을 확인해볼 수 있었다.

하지만 @Pre 인 경우는 데이터가 필터링에 걸려서 아예 전달 받지 못하기 때문에 DB에 저장조차 되지 않고 클라이언트에 에러가 발생했다고 알려준다.(개발자 콘솔을 확인)

---

### 뭐가 더 좋을까

어떤 것이든 Post 인 경우는 우선 메소드를 실행하기 때문에   
@Pre 를 사용해서 조건에 걸리는 경우 메소드를 아예 실행하지 않게끔 하는게 더 좋아보인다.

강의에서도 Post 보다는 Pre 를 더 자주 사용한다고 한다. 하지만 Post도 사용할 때가 있다고 하니 어떻게 다르게 작동하는지 확인해두자!